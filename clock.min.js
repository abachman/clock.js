// https://github.com/abachman/clock.js
(function(s,t){"use strict";var i=0,e=1,o=2,n=5,h,r=["tick","second","finish"],c=function(i){if(s.console!==t&&s.console.log!==t&&s.DEBUG){s.console.log.apply(s.console,arguments)}},u=function(i){if(s.console!==t&&s.console.error!==t){s.console.error.apply(s.console,arguments)}};var a=function(s){this.callbacks=s||{};this.status=o};a.prototype.next_tick=function(){if(!(this.status===i||this.status===o)){var t=this;this.timeout=s.setTimeout(function(){t.next_tick()},1e3/n);this.call_tick();this.countdown()}};a.prototype.zero_pad=function(){this.zero_padded=this.zero_padded||{};this.zero_padded.hours=(this.hours<10?"0":"")+String(this.hours);this.zero_padded.minutes=(this.minutes<10?"0":"")+String(this.minutes);this.zero_padded.seconds=(this.seconds<10?"0":"")+String(this.seconds);this.zeroPadded=this.zero_padded;return this.zero_padded};for(var d=0;d<3;d++){h=r[d];a.prototype["call_"+h]=function(s){return function(){try{if(this.callbacks[s]!==t)this.callbacks[s](this)}catch(i){u("[clock.js] Failed "+s+" callback!",i.message)}}}(h)}a.prototype.countdown=function(){var s=Math.floor(((new Date).getTime()-this.start_time)/1e3);this.remaining_seconds=this.requested_seconds-s;this.seconds=this.remaining_seconds%60;this.minutes=Math.floor(this.remaining_seconds/60)%60;this.hours=Math.floor(Math.floor(this.remaining_seconds/60)/60);this.zero_pad();if(this.seconds!=this.previous.seconds||this.minutes!=this.previous.minutes||this.hours!=this.previous.hours){if(this.hours<=0&&this.minutes<=0&&this.seconds<=0){this.call_second();this.call_finish();this.stop()}else{this.call_second()}this.previous={hours:this.hours,minutes:this.minutes,seconds:this.seconds}}};a.prototype.start=function(s,t,i){this.hours=s||0;this.minutes=t||0;this.seconds=i||0;c("[clock.js] starting clock at "+this.hours+":"+this.minutes+":"+this.seconds);this.previous={h:0,m:0,s:0};this.remaining_seconds=this.hours*3600+this.minutes*60+this.seconds;this.requested_seconds=this.remaining_seconds;this.unpause()};a.prototype.unpause=function(){this.running=true;this.status=e;this.start_time=(new Date).getTime();this.requested_seconds=this.remaining_seconds;this.next_tick()};a.prototype.stop=function(){this.status=o;this.running=false};a.prototype.pause=a.prototype.stop;s.Clock=a})(window);